#!/usr/bin/bash

system_loc=~/Projects

project=$(find ${system_loc} -maxdepth 1 ! -name 'Projects' -type d -printf "%f\n" | fzf-tmux -r 30% --reverse)
[ -n "$project" ] || exit
# Check if the project is already open in an other session
if grep -qw "$project" <(tmux list-sessions); then
    # Check if already in a tmux session, in which case just change client
    if [ -n "$TMUX" ]; then
        tmux switch-client -t $project
    else
        tmux attach -t $project
    fi
else
    if [ -n "$TMUX" ]; then
        echo "Not working yet"
        # TODO tmux detach && cd $system_loc/$project && tmux new -s $project
    else
        cd $system_loc/$project && tmux new -s $project
    fi
fi
